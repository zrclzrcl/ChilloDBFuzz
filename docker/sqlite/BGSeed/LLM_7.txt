CREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    description TEXT,
    price REAL NOT NULL CHECK (price > 0),
    category TEXT
);

CREATE INDEX idx_products_name ON products (name);
CREATE VIEW discounted_products AS
SELECT id, name, price * 0.9 AS discounted_price FROM products WHERE price > 100;

INSERT INTO products (name, description, price, category) VALUES
('Laptop', 'Powerful laptop with 16GB RAM', 1200.00, 'Electronics'),
('Mouse', 'Ergonomic wireless mouse', 25.00, 'Electronics'),
('Book', 'A thrilling mystery novel', 15.00, 'Books');

SELECT * FROM products WHERE price BETWEEN 10 AND 100;
SELECT name, discounted_price FROM discounted_products WHERE discounted_price < 25;

CREATE TRIGGER update_description
AFTER UPDATE ON products
BEGIN
  UPDATE products SET description = 'Updated Description' WHERE id = NEW.id AND description IS NULL;
END;

UPDATE products SET description = NULL WHERE name = 'Mouse';

SELECT * FROM products;

DELETE FROM products WHERE id = (SELECT id FROM products ORDER BY price ASC LIMIT 1);

SELECT * FROM products;

PRAGMA table_info(products);

CREATE VIRTUAL TABLE fts_products USING fts5(name, description, category);

INSERT INTO fts_products (name, description, category) SELECT name, description, category FROM products;

SELECT * FROM fts_products WHERE fts_products MATCH 'Laptop';

SELECT snippet(fts_products,0,'<b>','</b>','...',50) FROM fts_products WHERE fts_products MATCH 'thrilling';