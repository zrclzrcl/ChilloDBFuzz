CREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    price REAL NOT NULL CHECK (price > 0),
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_products_name ON products (name);

INSERT INTO products (name, price, description) VALUES
('Laptop', 1200.50, 'High-performance laptop for professionals'),
('Mouse', 25.00, 'Wireless ergonomic mouse'),
('Keyboard', 75.00, 'Mechanical keyboard with RGB lighting');

-- Attempting an upsert operation using REPLACE INTO.
REPLACE INTO products (id, name, price) VALUES (1, 'Laptop', 1250.00);


-- Testing the generation of a large string to test TEXT handling.
INSERT INTO products (name, description) VALUES ('LongNameProduct', REPEAT('A', 1000));

-- Trigger a constraint violation (price <= 0)
INSERT INTO products (name, price) VALUES ('InvalidProduct', -10);

-- Use a WITHOUT ROWID table for further mutations
CREATE TABLE config (
    key TEXT PRIMARY KEY,
    value TEXT
) WITHOUT ROWID;

INSERT INTO config (key, value) VALUES ('setting1', 'value1');

SELECT last_insert_rowid();