CREATE TABLE products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    price REAL NOT NULL,
    description TEXT
);

INSERT INTO products (name, price, description) VALUES
('Laptop', 1200.00, 'High-performance laptop'),
('Mouse', 25.00, 'Wireless mouse'),
('Keyboard', 75.00, 'Mechanical keyboard');

CREATE VIEW cheap_products AS
SELECT id, name, price
FROM products
WHERE price < 100;

CREATE TABLE orders (
    order_id INTEGER PRIMARY KEY AUTOINCREMENT,
    product_id INTEGER NOT NULL,
    quantity INTEGER NOT NULL,
    FOREIGN KEY (product_id) REFERENCES products(id)
);

INSERT INTO orders (product_id, quantity) VALUES
(1, 1),
(2, 5),
(3, 2);

CREATE TRIGGER update_product_name
AFTER UPDATE ON products
BEGIN
  INSERT INTO orders (product_id, quantity) VALUES (OLD.id, NEW.id);
END;

UPDATE products SET name = 'Laptop Pro' WHERE id = 1;

SELECT * FROM cheap_products;
PRAGMA integrity_check;